<!-- login_form.html -->
<div id="login-form-container">
    {% if message %}
      <div class="text-center mt-4 text-red-600 text-sm">{{ message }}</div>
    {% endif %}
  
    {% if not show_magic %}
      <form method="POST" action="/api/method/login" class="space-y-4">
        <input
          type="text"
          name="usr"
          placeholder="E-mailadres"
          class="w-full p-3 border border-gray-300 rounded-md text-sm"
          required
        />
        <input
          type="password"
          name="pwd"
          placeholder="Wachtwoord"
          class="w-full p-3 border border-gray-300 rounded-md text-sm"
          required
        />
        <div class="flex justify-between gap-4 mt-6">
          <button
            type="submit"
            class="flex-1 flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md text-sm hover:bg-blue-700 hover:shadow transition"
          >
            <i class="las la-lock-open text-lg"></i>
            Login direct
          </button>
          <button
            type="button"
            class="flex-1 flex items-center justify-center gap-2 bg-gray-100 text-blue-600 border border-gray-300 px-4 py-2 rounded-md text-sm hover:bg-gray-200 hover:text-blue-700 transition"
            onclick="toggleLoginMode()"
          >
            <i class="las la-envelope-open text-lg"></i>
            Login link
          </button>
        </div>
      </form>
    {% else %}
      <form method="POST" action="/api/method/frappe.core.doctype.user.user.send_login_link" class="space-y-4">
        <input
          type="email"
          name="email"
          placeholder="E-mailadres"
          class="w-full p-3 border border-gray-300 rounded-md text-sm"
          required
        />
        <div class="flex justify-between gap-4 mt-6">
          <button
            type="submit"
            class="flex-1 flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md text-sm hover:bg-blue-700 hover:shadow transition"
          >
            <i class="las la-envelope-open text-lg"></i>
            Stuur loginlink
          </button>
          <button
            type="button"
            class="flex-1 bg-gray-100 text-gray-700 border border-gray-300 px-4 py-2 rounded-md text-sm hover:bg-gray-200 transition"
            onclick="toggleLoginMode()"
          >
            Terug
          </button>
        </div>
      </form>
    {% endif %}
  </div>
  
  <script>
    let show_magic = false;
    function toggleLoginMode() {
      show_magic = !show_magic;
      window.location.reload(); // for server-rendered swap, or replace with htmx/event
    }
  </script>
  